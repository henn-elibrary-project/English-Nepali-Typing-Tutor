<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta charset="ISO-8859-1">
	<title>Making Some Sort of Typer</title>
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/keyboard.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<style type="text/css">


		

	</style>

</head>
<body>
	<div class = "wrapper">
		<div class ="header">

			<a class = "logo" href="https://www.facebook.com/sadhakbj" title="Bijaya Prasad Kuikel"> Prasad </a>
			
			<a href = "nepali.html" class = "menus"> नेपाली </a>
			<a  href= "#"class = "menus"> Game </a>
			<a  href= "https://github.com/sadhakbj/Typing" class = "menus"> Fork on GitHub </a>


			
		</div>
	<div class = "result">
			<ul>
				
			<li class = "list">Characters: <span id="totalWords"> </span> </li>
			<li class = "list"> Correct: <span id = "correct"> </span>  </li>
			<li class = "list"> Errors: <span id="err"> </span>  </li>
			<li class = "list"> Accuracy: <span id = "accuracy"></span> </li>
			<li class = "list"> Time: <span id="time" class = "time"> 0 </span> secs</li>

		</ul>

		
		</div>


	<div class ="this" id="lessonClass"> </div>


	<div id="container">
		<ul id="keyboard">
        <li class="symbol" id ="À"><span class="off">`</span><span class="on">~</span></li>
        <li class="symbol" id="1"><span class="off">1</span><span class="on">!</span></li>
        <li class="symbol" id="2"><span class="off">2</span><span class="on">@</span></li>
        <li class="symbol" id="3"><span class="off">3</span><span class="on">#</span></li>
        <li class="symbol" id ="4"><span class="off">4</span><span class="on">$</span></li>
        <li class="symbol" id="5"><span class="off">5</span><span class="on">%</span></li>
        <li class="symbol" id="6"><span class="off">6</span><span class="on">^</span></li>
        <li class="symbol" id="7"><span class="off">7</span><span class="on">&amp;</span></li>
        <li class="symbol" id="8"><span class="off">8</span><span class="on">*</span></li>
        <li class="symbol" id="9"><span class="off">9</span><span class="on">(</span></li>
        <li class="symbol" id="0"><span class="off">0</span><span class="on">)</span></li>
        <li class="symbol" id ="½"><span class="off">-</span><span class="on">_</span></li>
        <li class="symbol" id="»"><span class="off">=</span><span class="on">+</span></li>
        <li class="delete lastitem" id = "bckspace">Back</li>
        <li class="tab">tab</li>
        <li id="Q">q</li>
        <li id ="W" value = "ram">w</li>
        <li id ="E">e</li>
        <li id="R">r</li>
        <li id="T">t</li>
        <li id="Y">y</li>
        <li id = "U">u</li>
        <li id="I">i</li>
        <li id="O">o</li>
        <li id="P">p</li>
        <li class="symbol" id ="Û" ><span class="off">[</span><span class="on">{</span></li>
        <li class="symbol" id="Ý"><span class="off">]</span><span class="on">}</span></li>
        <li class="symbol lastitem" id ="Ü"><span class="off">\</span><span class="on">|</span></li>
        <li class="capslock">caps lock</li>
        <li id ="A">a</li>
        <li id = "S">s</li>
        <li id = "D">d</li>
        <li id = "F">f</li>
        <li id = "G">g</li>
        <li id= "H">h</li>
        <li id = "J">j</li>
        <li id = "K">k</li>
        <li id = "L">l</li>
        <li class="symbol" id ="º"><span class="off">;</span><span class="on">:</span></li>
        <li class="symbol" id='Þ'><span class="off">'</span><span class="on">&quot;</span></li>
        <li class="return lastitem" >Enter</li>
        <li class="left-shift">shift</li>
        <li id ="Z">z</li>
        <li class="letter" id="X">x</li>
        <li class="letter" id="C">c</li>
        <li id="V">v</li>
        <li id="B">b</li>
        <li id="N">n</li>
        <li id="M">m</li>
        <li class="symbol" id= "¼"><span class="off">,</span><span class="on">&lt;</span></li>
        <li class="symbol" id="¾"><span class="off">.</span><span class="on">&gt;</span></li>
        <li class="symbol" id="¿"><span class="off">/</span><span class="on">?</span></li>
        <li class="right-shift lastitem">shift</li>
        <li class="space lastitem" id = "space">&nbsp; Spacebar</li>
    </ul>

	</div>


	
</div>

<div class = "footer">
	<div class = "footer-content">
		&copy Bijayananda (Bijaya Prasad Kuikel)  Leapfrog Technology Inc Training2015
	</div>
	
</div>




	<script type="text/javascript">
	;(function(){
		'use strict';

		 var count = 0;
	 	 var error = 0;
	 	 var word;
	 	 var matched = 0;
	 	 var interval;
	 	 

	 	 function getRandomNumber(min, max) {		   
		    var ran = Math.floor(Math.random() * (max - min) + min);
		    // console.log(ran);
		     return ran;
				};


		 //this function will check if we need the new word::
		 function checkNewWord(){
			if(count === word.length)
			{	
				//we will reset the value of matched and error to 0 again			
				matched = 0;
				error = 0;
				var tags = document.getElementsByClassName('this')[0];
				//delete the class thisclass
				var deleteid  = document.getElementById('thisClass');
				tags.removeChild(deleteid);						
				//again lets generate words means we will create the above deleted class again
		    	generateWords();
		    	updateResult(matched , error , word.length);

			}

		};

		//this function is main one which generates the lessons/ words
		function generateWords() {

			count = 0;
			//from this array we select any of these... this is temporary solution in future i may think new ideas ;)
			var lessons = [
			"a s d j k l  a s d j k l  a s d j k l" ,
			"aa ss dd ff jj kk ll aa ss dd ff jj kk ll" ,
			"asd asd asd asdf asdf jkl jkl jkl jkl",
			"qwerty qwerty uioop uiop uiop",
			"learning is always a fun we love to learn we are happy",
			"kathmandu university dhulikhel nepal",
			"final project demo presentation at leapfrog technology inc",
			"i am bijaya prasad kuikel bijayananda from kathmandu university i learnt so many things and today i 			completed this project i am really happy to learn this please tell me how are you feeling thank you"


			];



			var max = lessons.length;
			//we need to get random number from the above array so pass the parameters
			var num = getRandomNumber(0 , max);

			alert(num);
			console.log(num);
			word = lessons[num];
			
			
			// here goes the core code for displaying the contents got from the array;

			var tags = document.getElementsByClassName('this')[0];
				tags.style.background = 'white';


			var newDiv = document.createElement('div');
				newDiv.setAttribute('id' , 'thisClass');
				tags.appendChild(newDiv);


			var tags = document.getElementsByClassName('this')[0];
			
			for(var i = 0 ; i < word.length ; i++)
			{	var spans = document.createElement('span');
				spans.setAttribute('id' , 'span'+i);
				spans.innerHTML = word[i];
				newDiv.appendChild(spans);
				
			}

			//this piece of code will highlight the first element
			var cnt = 0;
			highlight(cnt);

		};

		window.onload = function(){
			//on loading the main window generatewords and update the result means show matched = 0 , error = 0 and accuracy
			generateWords();
			updateResult(matched , error , word.length);
			updateTime();


			// console.log(word);

				};

				//this function is used to highlight .. it will give hint for which letter to type
			    function highlight(cnt){
				//check on consoles you may see something interesting :P	
				console.log('count is' +count);
				console.log('cnt is' , +cnt);
				//this if to check .. if the cnt we passed has reached to word length .. if it has not
				//then only we will highlight the next word to be typed
				if(cnt < word.length)
				{
				var get = document.getElementById('span'+ cnt);
				get.style.background = 'cyan';

				
				}
				
				};

			//We will the updated results .. how many characters matched .. errors etc
			function updateResult(matched , errors , totalWords){

				document.getElementById('totalWords').innerHTML = totalWords;
				var correctSpan = document.getElementById('correct');
				var errorSpan = document.getElementById('err');
				var acc = document.getElementById('accuracy');

				correctSpan.innerHTML = matched;
				errorSpan.innerHTML = error;

				//lets calculate the accuracy::

				var accc = ((matched-errors)/totalWords)*100;
				//this toFixed(2) means we shall show upto fix 2
				acc.innerHTML = accc.toFixed(2)+" %";
			}
		
			//there is a timer which is showing the time in seconds brother just increment the value
			function updateTime(){
				if (interval === undefined) {
			    interval = window.setInterval(function(){
			    var time = document.getElementsByClassName('time')[0];
			    time.innerHTML = Number(time.innerHTML) +1;
			    },1000),+"secs";

			};
			}




		//the very important part of the project .. on key down ..	
		window.onkeydown = function(event){


		changeColor();

		var hh = event.which;

		function changeColor(){

			var div =   String.fromCharCode(event.which);
			 if(event.which === 32)
            {
                div = "space";
            }

            if(event.which === 8)
            {
                div = "bckspace";
            }
            var get = document.getElementById(div);
            get.style.background = '#33aafa';

            setTimeout(function (){
                                
            get.style.background = "#fee";

                    },150);

            };

		if((hh > 47 && hh<58 ) || (hh > 64 && hh<91) || (hh > 96 && hh<123) || hh == 32)
		{		
			//we are now validating::
			console.log(event.which);
			var inputToNum = String.fromCharCode(hh).toLowerCase();



			console.log(inputToNum);

			// alert(word);
			// alert(count);


			//we need to convert the value from the spans to variable first::

			var cnt = count+1;
			highlight(cnt);


			var check = word.charAt(count);		
			 

			if(inputToNum === check)
				{	//this is matched
					var getSpan = document.getElementById('span'+count);
					getSpan.style.color = 'blue';
					getSpan.style.background = 'none';
					matched++;
					console.log('total matched' +matched);
					count++;
					updateResult(matched , error , word.length);
					checkNewWord();
					


				}
			else
				{
					console.log('not matched');
					var getSpan = document.getElementById('span'+count);
					getSpan.style.background = 'red';
					getSpan.style.color = 'white';
					error++;
					console.log('total errors are' + error);
					count++;
					updateResult(matched , error , word.length);
					checkNewWord();


				}
			


		}

	}
		})();
	</script>

	
</body>
</html>
